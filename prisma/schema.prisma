// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum Genders {
  male
  female
}

enum UserRole {
  ADMIN
  MEMBER
}

model User {
  id                Int                @id @default(autoincrement())
  username          String             @unique
  fullName          String
  email             String             @unique
  country           String
  city              String
  sponsorUsername   String
  phone             String             @unique
  password          String
  gender            Genders
  role              UserRole           @default(MEMBER)
  isBlocked         Boolean            @default(false)
  displayPhoto      String?
  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt
  bankDetails       BankDetails?
  leaderCycleBonus  LeaderCycleBonus?
  withdrawalWallet  WithdrawalWallet?
  salesIncomeBonus  SalesIncomeBonus?
  referrerIncome    ReferrerIncome?
  cycleWelcomeBonus CycleWelcomeBonus?
  testimonyBonus    TestimonyBonus?
  completionBonus   CompletionBonus?
  unclaimedRewards  UnclaimedRewards?
}

model BankDetails {
  id            Int      @id @default(autoincrement())
  bankName      String
  accountNumber Int      @unique
  accountName   String
  userId        Int      @unique
  User          User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

model LeaderCycleBonus {
  id        Int      @id @default(autoincrement())
  bronze    Float    @default(0.00)
  gold      Float    @default(0.00)
  diamond   Float    @default(0.00)
  userId    Int      @unique
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model WithdrawalWallet {
  id        Int      @id @default(autoincrement())
  bronze    Float    @default(0.00)
  gold      Float    @default(0.00)
  diamond   Float    @default(0.00)
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId    Int      @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model SalesIncomeBonus {
  id        Int      @id @default(autoincrement())
  amount    Float    @default(0.00)
  userId    Int      @unique
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model ReferrerIncome {
  id        Int      @id @default(autoincrement())
  bronze    Float    @default(0.00)
  gold      Float    @default(0.00)
  diamond   Float    @default(0.00)
  userId    Int      @unique
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model CycleWelcomeBonus {
  id        Int      @id @default(autoincrement())
  bronze    Float    @default(0.00)
  gold      Float    @default(0.00)
  diamond   Float    @default(0.00)
  userId    Int      @unique
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model TestimonyBonus {
  id        Int      @id @default(autoincrement())
  bronze    Float    @default(0.00)
  gold      Float    @default(0.00)
  diamond   Float    @default(0.00)
  count     Int      @default(0)
  userId    Int      @unique
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model CompletionBonus {
  id        Int      @id @default(autoincrement())
  bronze    Float    @default(0.00)
  gold      Float    @default(0.00)
  diamond   Float    @default(0.00)
  userId    Int      @unique
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model UnclaimedRewards {
  id               Int      @id @default(autoincrement())
  bronze           Float    @default(0.00)
  bronzeLostCount  Int      @default(0)
  gold             Float    @default(0.00)
  goldLostCount    Int      @default(0)
  diamond          Float    @default(0.00)
  diamondLostCount Int      @default(0)
  userId           Int      @unique
  user             User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
}
